jQuery(document).ready(function(c){var i=c(".tribe-mini-calendar-wrapper").parent();function d(){var i=c(".tribe-mini-calendar-wrapper");if(c(".tribe-mini-calendar-wrapper.layout-wide").length&&c(".tribe-mini-calendar-right").length){var a=c(".tribe-mini-calendar-right"),e=i.height(),n=a.outerHeight();e<(n+=20)?i.css("height",n+"px"):i.css("height","auto")}else c(".tribe-mini-calendar-wrapper.layout-wide").length&&i.css("height","auto")}d();var a=new Date,e=a.getDate().toString(),n=(a.getMonth()+1).toString(),s=a.getFullYear().toString()+"-"+(n[1]?n:"0"+n[0])+"-"+(e[1]?e:"0"+e[0]),o=s.slice(0,7);i.on("click",".tribe-mini-calendar-nav-link",function(i){i.preventDefault();var a=c(this),e=a.closest(".tribe-mini-calendar"),n=a.closest(".tribe-mini-calendar-wrapper"),t=a.attr("data-month"),r=t.slice(0,7);o==r&&(t=s);var l={action:"tribe-mini-cal",eventDate:t,count:e.data("count"),tax_query:e.data("tax-query"),nonce:e.data("nonce")};e.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),c.post(TribeMiniCalendar.ajaxurl,l,function(i){if(e.find(".tribe-mini-calendar-list-wrapper").remove(),i.success){var a=c.parseHTML(i.html);e.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),n.replaceWith(a),d()}})}).on("click",".tribe-mini-calendar-day-link",function(i){i.preventDefault();var a,e=c(this),n=e.attr("data-day"),t=e.text(),r=e.closest(".tribe-mini-calendar"),l=r.parent().siblings(".tribe-mini-calendar-list-wrapper");c("h2.tribe-mini-calendar-title").text(c("#tribe-mini-calendar-month-name").val()+" "+t+" Events"),(a=e).closest(".tribe-mini-calendar").find(".tribe-events-thismonth,.tribe-events-othermonth").removeClass("tribe-mini-calendar-today"),a.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today");var s={action:"tribe-mini-cal-day",eventDate:n,count:r.data("count"),tax_query:r.data("tax-query"),nonce:r.data("nonce")};r.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),c.post(TribeMiniCalendar.ajaxurl,s,function(i){if(i.success){var a="";a=c.isFunction(c.fn.parseHTML)?c.parseHTML(i.html):i.html,r.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),l.replaceWith(a),d()}})})});