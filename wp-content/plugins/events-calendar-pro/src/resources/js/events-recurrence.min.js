var tribe_events_pro_admin=tribe_events_pro_admin||{};tribe_events_pro_admin.recurrence={recurrence_count:0,exclusion_count:0,event:{}},function(B,a){"use strict";var t=B(document);a.init=function(){this.init_recurrence()},a.init_recurrence=function(){this.$recurrence_staging=B("#tribe-recurrence-staging"),this.recurrence_tmpl=document.getElementById("tmpl-tribe-recurrence"),this.recurrence_tmpl&&(this.recurrence_template=Handlebars.compile(this.recurrence_tmpl.innerHTML),this.$add_recurrence=B("#tribe-add-recurrence"),this.$recurrence_rules=B(".tribe-event-recurrence-rule"),this.$recurrence_row=B(".recurrence-row.tribe-datetime-block").addClass("tribe-recurrence-exclusion-row--idle"),this.$exclusion_staging=B("#tribe-exclusion-staging"),this.exclusion_tmpl=document.getElementById("tmpl-tribe-exclusion"),this.exclusion_template=Handlebars.compile(this.exclusion_tmpl.innerHTML),this.$add_exclusion=B("#tribe-add-exclusion"),this.$exclusion_rules=B(".tribe-event-recurrence-exclusion"),this.recurrence_errors={days:[],end:[]},this.date_format=tribe_datepicker_opts.dateFormat.toUpperCase(),this.date_format=this.date_format.replace("YY","YYYY"),this.populate_recurrence(tribe_events_pro_recurrence_data),window.Handlebars.registerHelper({tribe_recurrence_select:function(e,t){var r=B("<select />").html(t.fn(this));return e&&r.find("option:selected").attr("selected",!1),r.find('[value="'+e+'"]').attr("selected","selected"),r.html()},tribe_if_in:function(e,t,r){return void 0===t&&(t=[]),void 0===r&&(r=""),-1!==B.inArray(e,t)?r:""},tribe_if_not_in:function(e,t,r){return void 0===t&&(t=[]),void 0===r&&(r=""),-1===B.inArray(e,t)?r:""},tribe_checked_if_is:function(e,t){return e===t?"checked":""},tribe_checked_if_is_not:function(e,t){return e!==t?"checked":""},tribe_checked_if_in:function(e,t){return-1!==B.inArray(e,t)?"checked":""}}))},a.attach_behaviors=function(){B(".eventForm").on("submit",".wp-admin.events-cal #post",this.event.submit_validation).on("change",'[data-field="type"]',this.event.recurrence_type_changed).on("change",'[data-field="end-type"]',this.event.recurrence_end_type_changed).on("change",'[data-field="custom-month-number"]',this.event.recurrence_custom_month_changed).on("change",'[data-field="same-time"]',this.event.same_time_changed).on("change",'[data-field="custom-week-day"]',this.event.weekdays_changed).on("change",".recurrence_end_count",this.event.recurrence_end_count_changed).on("change",".recurrence-row, .custom-recurrence-row",this.event.recurrence_row_changed).on("change","#EventStartDate, #EventEndDate, #allDayCheckbox, #EventStartTime, #EventEndTime",this.event.datepicker_updated).on("change","#EventStartTime, #EventEndTime, #allDayCheckbox",this.setup_same_time).on("change","#EventStartDate",this.setup_same_day).on("click","#tribe-add-recurrence",this.event.add_recurrence).on("click","#tribe-add-exclusion",this.event.add_exclusion).on("click",".tribe-event-recurrence .tribe-handle, .tribe-event-exclusion .tribe-handle",this.event.toggle_rule).on("click",".tribe-event-recurrence .tribe-confirm-delete-this, .tribe-event-exclusion .tribe-confirm-delete-this",this.event.delete_rule),B(document).on("click",".tribe-event-recurrence .tribe-delete-this, .tribe-event-exclusion .tribe-delete-this",this.event.delete_rule),B('input[data-field="is_recurring"][value="true"]').length&&(B(".eventForm").on("change",".recurrence-row input, .custom-recurrence-row input, .recurrence-row select, .custom-recurrence-row select",this.event.recurrence_changed),B(".eventForm").on("recurrenceEndChanged",'[data-field="end"]',this.event.recurrence_changed)),B('[data-field="end"]').datepicker("option","onSelect",this.event.datepicker_end_date_changed),B(".recurrence_end, #EventStartDate, #EventEndDate").datepicker("option","onClose",this.event.datepicker_updated),this.set_recurrence_end_min_date(),this.init_buttonset()},a.init_dropdowns=function(){B(".recurrence-row .tribe-dropdown").not(".dropdown-created").tribe_dropdowns()},a.init_buttonset=function(){B(tribe_buttonset.selector.input).trigger("change.tribe_buttonset")},a.add_recurrence=function(e){var t=void 0===e;void 0!==e&&void 0!==e.end&&e.end&&(e.end=moment(e.end).format(this.date_format));try{e.custom.date.date&&(e.custom.date.date=moment(e.custom.date.date).format(this.date_format))}catch(e){}this.$recurrence_staging.append(this.recurrence_template(e));var r=this.$recurrence_staging.find(".tribe-event-recurrence");t&&r.addClass("recurrence-new-rule"),r.find('[name*="recurrence[rules][]"],[id*="recurrence_rule_--"],[data-input*="recurrence_rule_--"],[data-depends*="#recurrence_rule_--"]').each(function(){var e=B(this);e.attr("name")&&e.attr("name",e.attr("name").replace(/recurrence\[rules\]\[\]/,"recurrence[rules]["+a.recurrence_count+"]")),e.attr("id")&&e.attr("id",e.attr("id").replace(/recurrence_rule_--/,"recurrence_rule_"+a.recurrence_count)),e.attr("data-input")&&e.attr("data-input",e.attr("data-input").replace(/recurrence_rule_--/,"recurrence_rule_"+a.recurrence_count)).data("input",e.attr("data-input")),e.attr("data-depends")&&e.attr("data-depends",e.attr("data-depends").replace(/#recurrence_rule_--/,"#recurrence_rule_"+a.recurrence_count))}),e||r.find(".tribe-same-time-checkbox").prop("checked",!0),r.find(".tribe-datepicker").datepicker(tribe_datepicker_opts),r.insertBefore(this.$recurrence_staging),this.set_recurrence_end_min_date(),this.set_recurrence_data_attributes(r),this.maybe_relocate_end_date(r),this.adjust_rule_helper_text(r),this.update_rule_recurrence_text(r),this.$recurrence_rules=this.$recurrence_rules.add(r),this.recurrence_count++,this.check_for_useful_rule(),this.setup_intervals(r),this.setup_same_time(),this.setup_same_day(),this.setup_yearly_select(r),this.setup_weekly_select(r),this.init_dropdowns(),void 0===e&&this.toggle_rule(r),B("#tribe-recurrence-active.inactive").trigger("click").prop("checked",!0).removeClass("inactive")},a.setup_weekly_select=function(e){var t=B(document.getElementById("EventStartDate")).val(),r=moment(t,this.date_format).isoWeekday();0<e.find('[data-field="custom-week-day"]').filter(":checked").length||e.find('[data-field="custom-week-day"][value="'+r+'"]').each(function(){B(this).parent().trigger("click")})},a.setup_yearly_select=function(e){var t=B(document.getElementById("EventStartDate")),r=tribe_dynamic_help_text.datepicker_format;r=r.replace("m","MM").replace("d","DD").replace("Y","YYYY");var n=moment(t.val(),r).format("M"),c=e.find('[data-field="custom-year-month"]');c.val()||c.val(n)},a.setup_intervals=function(e){var t=e.find('[data-field="type"]').val(),r=e.find("input.tribe-recurrence-rule-interval"),n=r.get(0);if(!n.created){var c=1,a=6,i=[];for("Daily"===t?a=6:"Weekly"===t?a=6:"Monthly"===t?a=12:"Yearly"===t&&(a=3),c=1;c<=a;c++)i.push({id:c,text:""+c});r.select2("destroy").removeClass("select2-offscreen").data("options",i),n.created=!0}},a.setup_same_day=function(){B(".tribe-event-recurrence, .tribe-event-exclusion").each(function(){var e=B(this).find(".recurrence-same-day-text"),t=B(document.getElementById("EventStartDate")),r=a.convert_date_format_php_to_moment(tribe_dynamic_help_text.datepicker_format),n=moment(t.val(),r).format("D");e.html(tribe_events_pro_recurrence_strings.recurrence["same-day-month-"+n])})},a.setup_same_time=function(){B(".tribe-event-recurrence, .tribe-event-exclusion").each(function(){var e=B(this),t=e.find(".recurrence-same-time-text"),r="";if(B("#allDayCheckbox:checked").length)r=tribe_events_pro_recurrence_strings.recurrence["same-time-text-same-all-day"];else{var n=B(document.getElementById("EventStartTime")),c=B(document.getElementById("EventEndTime"));r=tribe_events_pro_recurrence_strings.recurrence["same-time-text-same"].replace("%1$s",n.val()).replace("%2$s",c.val())}t.html(r);var a=e.find(".tribe-timepicker:not(.ui-timepicker-input)");tribe_timepickers.setup_timepickers(a)})},a.maybe_relocate_end_date=function(e){var t=e.find(".recurrence-custom-container"),r=e.find(".recurrence-end-container"),n=e.find(".recurrence_end");"Date"===e.find('[data-field="type"]').data("value")?t.append(n):r.append(n)},a.check_for_useful_rule=function(){var e=this.$recurrence_rules.filter(":first"),t=!1;this.$recurrence_rules.find('[data-field="type"]').each(function(){"None"!==B(this).data("value")&&(t=!0)}),t?e.closest("table").addClass("tribe-has-recurrence-rule"):e.closest("table").removeClass("tribe-has-recurrence-rule")},a.add_exclusion=function(e){var t=void 0===e;if(void 0!==e&&void 0!==e.end&&e.end){var r=tribe_datepicker_opts.dateFormat.toUpperCase().replace("YY","YYYY");e.end=moment(e.end).format(r)}this.$exclusion_staging.append(this.exclusion_template(e));var n=this.$exclusion_staging.find(".tribe-event-exclusion");t&&n.addClass("exclusion-new-rule"),n.find('[name*="recurrence[exclusions][]"],[id*="exclusion_rule_--"],[data-input*="exclusion_rule_--"],[data-depends*="#exclusion_rule_--"]').each(function(){var e=B(this);e.attr("name")&&e.attr("name",e.attr("name").replace(/recurrence\[exclusions\]\[\]/,"recurrence[exclusions]["+a.exclusion_count+"]")),e.attr("id")&&e.attr("id",e.attr("id").replace(/exclusion_rule_--/,"exclusion_rule_"+a.exclusion_count)),e.attr("data-input")&&e.attr("data-input",e.attr("data-input").replace(/exclusion_rule_--/,"exclusion_rule_"+a.exclusion_count)).data("input",e.attr("data-input")),e.attr("data-depends")&&e.attr("data-depends",e.attr("data-depends").replace(/#exclusion_rule_--/,"#exclusion_rule_"+a.exclusion_count))}),e||n.find(".tribe-same-time-checkbox").prop("checked",!0),n.find(".tribe-datepicker").datepicker(tribe_datepicker_opts),n.insertBefore(this.$exclusion_staging),this.set_recurrence_end_min_date(),this.set_recurrence_data_attributes(n),this.maybe_relocate_end_date(n),this.adjust_rule_helper_text(n),this.update_rule_recurrence_text(n),this.$exclusion_rules=this.$exclusion_rules.add(n),this.exclusion_count++,this.check_for_useful_rule(),this.setup_intervals(n),this.setup_same_time(),this.setup_same_day(),this.setup_yearly_select(n),this.setup_weekly_select(n),this.init_dropdowns(),void 0===e&&this.toggle_rule(n)},a.populate_recurrence=function(e){a.operations_completed=0,void(a.total_operations=0)!==e.rules&&e.rules.length?(a.total_operations=1,a.async_operation(function(e,t){a.add_recurrence(e),t()},e.rules,function(){a.operations_completed+=1,a.populate_completed()}),void 0!==e.exclusions&&e.exclusions.length&&(a.total_operations+=1,a.async_operation(function(e,t){a.add_exclusion(e),t()},e.exclusions,function(){a.operations_completed+=1,a.populate_completed()}))):a.populate_completed()},a.populate_completed=function(){a.operations_completed===a.total_operations&&setTimeout(function(){a.attach_behaviors(),t.trigger("setup.dependency"),a.$recurrence_row.removeClass("tribe-recurrence-exclusion-row--idle")})},a.async_operation=function(e,t,r,n){var c=n||0;c>=t.length?setTimeout(r):setTimeout(function(){e(t[c],function(){a.async_operation(e,t,r,c+1)})})},a.adjust_rule_helper_text=function(e){var t=e.find('[data-field="custom-type"] option:selected');e.find(".recurrence-interval-type").text(t.data("plural")),e.find('[data-field="custom-type-text"]').val(t.data("plural"))},a.set_recurrence_data_attributes=function(e){(e||this.$recurrence_rules).each(function(){var e=B(this),t=null,r=["is_recurring","type","end-type","custom-type","custom-month-number"];for(var n in r)t=e.find('[data-field="'+r[n]+'"]'),"custom-month-number"===r[n]?e.attr("data-recurrence-"+r[n],isNaN(t.val())?"string":"numeric"):"custom-month-number"===r[n]?e.attr("data-recurrence-"+r[n],t.is(":checked")?"yes":"no"):e.attr("data-recurrence-"+r[n],t.val());var c=null;switch(e.find('[data-field="custom-type"]').val()){case"Weekly":c="week";break;case"Monthly":c="month";break;case"Yearly":c="year";break;case"Daily":default:c="day"}var a=e.find('[data-field="custom-'+c+'-same-time"]');e.attr("data-recurrence-same-time",a.filter(":checked").length?"yes":"no")})},a.set_recurrence_end_min_date=function(){var e=B("#EventStartDate").val();""!==e&&B(".recurrence_end").attr("placeholder",e).datepicker("option","minDate",e)},a.has_valid_recurrence_days=function(){var t=!0;return this.$recurrence_rules.each(function(e){a.has_valid_recurrence_days_for_rule(B(this))||(t=!1,a.recurrence_errors.days.push(e))}),t},a.has_valid_recurrence_days_for_rule=function(e){var t=e.find('[data-field="custom-interval"]'),r=e.find('[data-field="type"]');return t.val()===parseInt(t.val(),10)||"Custom"!==r.val()},a.has_valid_recurrence_ends=function(){var t=!0;return this.$recurrence_rules.each(function(e){a.has_valid_recurrence_end_for_rule(B(this))||(t=!1,a.recurrence_errors.end.push(e))}),t},a.has_valid_recurrence_end_for_rule=function(e){var t=e.find('[data-field="end"]'),r=e.find('[data-field="end-type"]');return"None"===e.find('[data-field="type"]').val()||"On"!==r.val()||t.val()&&!t.hasClass("placeholder")},a.reset_submit_button=function(){B("#publishing-action .button-primary-disabled").removeClass("button-primary-disabled"),B("#publishing-action .spinner").hide()},a.validate_recurrence=function(){var e=!0;return this.has_valid_recurrence_days()||(e=!1,alert(B(".rec-days-error:first").text()),B(".rec-days-error").each(function(e){B.inArray(e,a.recurrence_errors.days)&&B(this).show()})),this.has_valid_recurrence_ends()||(e=!1,alert(B(".rec-end-error:first").text()),B(".rec-end-error").each(function(e){B.inArray(e,a.recurrence_errors.end)&&B(this).show()})),e},a.toggle_rule=function(e,t){"undefined"!==t&&t?"open"===t?e.addClass("tribe-open"):e.removeClass("tribe-open"):e.toggleClass("tribe-open")},a.update_recurrence_text=function(){this.$recurrence_rules.each(function(){a.update_rule_recurrence_text(B(this))}),this.$exclusion_rules.each(function(){a.update_rule_recurrence_text(B(this))})},a.convert_date_format_php_to_moment=function(e){return e.replace("S","o").replace("j","D").replace("F","MMMM").replace("Y","YYYY").replace("m","MM").replace("d","DD")},a.update_rule_recurrence_text=function(e){var t=e.find('[data-field="type"]').val(),r=e.find('[data-field="end-type"] option:selected').val(),n=e.find('[data-field="end-count"]').val(),c="yes"===e.find('[data-field="same-time"]').val(),a=e.find('[data-field="custom-interval"]').val(),i=B(document.getElementById("allDayCheckbox")).prop("checked");if(n||(n=0),t=t.toLowerCase().replace(" ","-"),r=r.toLowerCase().replace(" ","-"),"none"!==t&&""!==t){var s=e.closest(".eventForm"),o=this.date_format+" hh:mm a",d=B(document.getElementById("EventStartDate")).val(),u=B(document.getElementById("EventStartTime")).val().toUpperCase();d+=" "+u;var l=B(document.getElementById("EventEndDate")).val();s.find('[name="EventEndMeridian"] option:selected');l+=" "+B(document.getElementById("EventEndTime")).val().toUpperCase();var _=moment(d,o),p=moment(l,o),v=_,h=c?u:e.find(".tribe-field-start_time").val(),m=null,f=null,b=tribe_events_pro_recurrence_strings.date.day_placeholder,g=_.format("D"),y=t;if(i&&!_.isSame(p,"day")?y+="-multi":i&&c&&(y+="-allday"),"weekly"===t){var x=[];e.find('[data-field="custom-week-day"]:checked').each(function(){x.push(tribe_events_pro_recurrence_strings.date.weekdays[parseInt(B(this).val(),10)-1])}),m=0===x.length?tribe_events_pro_recurrence_strings.date.day_placeholder:2===x.length?x.join(" "+tribe_events_pro_recurrence_strings.date.collection_joiner+" "):(m=x.join(", ")).replace(/(.*),/,"$1, "+tribe_events_pro_recurrence_strings.date.collection_joiner)}else if("monthly"===t){var k=e.find('[data-field="month-same-day"] option:selected').val(),w=e.find('[data-field="custom-month-number"] option:selected').val(),E=e.find('[data-field="custom-month-day"] option:selected').val();"yes"!==k&&isNaN(w)?(g=w,b=(b=tribe_events_pro_recurrence_strings.date[w.toLowerCase()+"_x"]).replace("%1$s",tribe_events_pro_recurrence_strings.date.weekdays[parseInt(E,10)-1])):(w=g,y+="-numeric")}else if("yearly"===t){k=e.find('[data-field="year-same-day"] option:selected').val(),w=e.find('[data-field="custom-year-month-number"]').val(),E=e.find('[data-field="custom-year-month-day"]').val();var C=[],$=e.find('[data-field="custom-year-month"]').val().split(",");B.each($,function(e,t){C.push(tribe_events_pro_recurrence_strings.date.months[parseInt(t,10)-1])}),f=0===C.length?tribe_events_pro_recurrence_strings.date.month_placeholder:2===C.length?C.join(" "+tribe_events_pro_recurrence_strings.date.collection_joiner+" "):(f=C.join(", ")).replace(/(.*),/,"$1, "+tribe_events_pro_recurrence_strings.date.collection_joiner),"yes"!==k&&isNaN(w)?(g=w,b=(b=tribe_events_pro_recurrence_strings.date[w.toLowerCase()+"_x"]).replace("%1$s",tribe_events_pro_recurrence_strings.date.weekdays[parseInt(E,10)-1])):(w=g,y+="-numeric")}else if("date"===t){var D=e.find("input.tribe-datepicker").val();if(!D)return void e.find(".tribe-event-recurrence-description").html("");v=moment(D,o)}y+="date"===t?"-on":"after"===r?"-after":"never"===r?"-never":"-on",i&&!c&&(y+="-at"),void 0===tribe_events_pro_recurrence_strings.recurrence[y]&&y.endsWith("-at")&&(y=y.replace(/-at$/,""));var Y=tribe_events_pro_recurrence_strings.recurrence[y];if(void 0!==Y){var I=e.find('[data-field="end"]').val();I||(I=e.find('[data-field="end"]').attr("placeholder"));var S=moment(I,o),T=this.convert_date_format_php_to_moment(tribe_dynamic_help_text.date_with_year);Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=(Y=Y.replace("[count]",n)).replace("[day_number]",g)).replace("[days_of_week]",m)).replace("[month_day_description]",b)).replace("[month_names]",f)).replace("[month_number]",w)).replace("[interval]",a)).replace("[series_end_date]",S.format(T))).replace("[start_date]",_.format(T))).replace("[start_time]",h)).replace("[single_date]",v.format(T))).replace("1 day(s)",tribe_events_pro_recurrence_strings.date.time_spans.day)).replace("1 week(s)",tribe_events_pro_recurrence_strings.date.time_spans.week)).replace("1 month(s)",tribe_events_pro_recurrence_strings.date.time_spans.month)).replace("1 year(s)",tribe_events_pro_recurrence_strings.date.time_spans.year)).replace("day(s)",tribe_events_pro_recurrence_strings.date.time_spans.days)).replace("week(s)",tribe_events_pro_recurrence_strings.date.time_spans.weeks)).replace("month(s)",tribe_events_pro_recurrence_strings.date.time_spans.months)).replace("year(s)",tribe_events_pro_recurrence_strings.date.time_spans.years),e.find(".tribe-event-recurrence-description").html(Y)}else e.find(".tribe-event-recurrence-description").html("")}else e.find(".tribe-event-recurrence-description").html("")},a.event.add_recurrence=function(e){e.preventDefault(),a.add_recurrence()},a.event.add_exclusion=function(e){e.preventDefault(),a.add_exclusion()},a.event.recurrence_type_changed=function(){var e=B(this),t=e.closest(".tribe-event-recurrence, .tribe-event-exclusion"),r=(e.find("option:selected").val(),t.find(".occurence-count-text")),n=parseInt(t.find(".recurrence_end_count").val(),10),c=e.data("plural");t.find(".recurrence_end_count").val(n),(isNaN(n)||n<=0)&&(t.find(".recurrence_end_count").val(1),n=1),1===n&&(c=e.data("single")),r.text(c),t.find('[data-field="occurrence-count-text"]').val(r.text()),a.set_recurrence_data_attributes(t),a.maybe_relocate_end_date(t),a.check_for_useful_rule(),a.setup_intervals(t),a.setup_yearly_select(t),a.setup_weekly_select(t),a.init_dropdowns(),e.closest(".tribe-buttonset").parent().find(".tribe-dependent:not(.tribe-dependency)").dependency(),a.toggle_rule(t,"open")},a.event.recurrence_end_type_changed=function(){var e=B(this).closest(".tribe-event-recurrence");a.set_recurrence_data_attributes(e)},a.event.recurrence_changed=function(){var e=B(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");e.attr("data-recurrence-changed","yes"),a.toggle_rule(e,"open")},a.event.recurrence_end_count_changed=function(){B(this).closest(".tribe-event-recurrence, .tribe-event-exclusion").find('[data-field="type"]').change()},a.event.recurrence_custom_month_changed=function(){var e=B(this).closest(".tribe-event-recurrence");a.set_recurrence_data_attributes(e)},a.event.submit_validation=function(){if(!tribe_events_pro_admin.validate_recurrence())return e.preventDefault(),e.stopPropagation(),tribe_events_pro_admin.reset_submit_button(),!1},a.event.datepicker_updated=function(){tribe_events_pro_admin.recurrence.update_recurrence_text(),tribe_events_pro_admin.recurrence.set_recurrence_end_min_date()},a.event.datepicker_end_date_changed=function(){B(this).removeClass("placeholder"),B(this).trigger("recurrence-end-changed.tribe")},a.event.recurrence_row_changed=function(){var e=B(".recurrence-pattern-description-row");e.is(":visible")||e.show(),tribe_events_pro_admin.recurrence.update_recurrence_text()},a.event.same_time_changed=function(){var e=B(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");a.set_recurrence_data_attributes(e)},a.event.weekdays_changed=function(){var e=B(this).closest(".tribe-event-recurrence, .tribe-event-exclusion");a.set_recurrence_data_attributes(e),a.update_rule_recurrence_text(e)},a.event.toggle_rule=function(){var e=B(this);a.toggle_rule(e.closest(".tribe-event-recurrence, .tribe-event-exclusion"))},a.event.delete_rule=function(e){e.preventDefault();var n=B(this).closest(".tribe-event-recurrence, .tribe-event-exclusion"),t={delete:{text:tribe_events_pro_recurrence_strings.recurrence["delete-confirm"],click:function(){B(this).dialog("close"),n.fadeOut(500,function(){n.remove(),tribe_events_pro_admin.recurrence.update_recurrence_text()})}},cancel:{text:tribe_events_pro_recurrence_strings.recurrence["delete-cancel"],click:function(){a.event.close_delete_confirmation_dialog(B(this))}}},r=B("#tribe-row-delete-dialog");n.is(".tribe-event-recurrence")?r.addClass("rule-dialog").removeClass("exclusion-dialog"):r.addClass("exclusion-dialog").removeClass("rule-dialog"),B(".delete-dialog-open").length&&a.event.close_delete_confirmation_dialog(r),r.dialog({dialogClass:"tribe-row-delete-dialog",closeOnEscape:!0,resizable:!1,height:n[0].offsetHeight,width:n[0].offsetWidth,buttons:t,position:{my:"center",at:"center",of:n},open:function(){var e=B(".tribe-row-delete-dialog"),t=e.find(".ui-dialog-buttonset button"),r=e.find(".ui-dialog-content");n.fadeTo(100,.1),r.css({height:"auto","min-height":"1.5rem"}),B(t[0]).removeClass().addClass("button button-red"),B(t[1]).removeClass().addClass("button button-secondary"),n.addClass("delete-dialog-open"),B("body").on("click",a.event.close_dialogs),B(window).on("resize",a.event.close_dialogs)},close:function(){n.removeClass("delete-dialog-open"),n.fadeTo(100,1),B("body").off("click",a.event.close_dialogs),B(window).off("resize",a.event.close_dialogs)}})},a.event.close_delete_confirmation_dialog=function(e){e&&e.dialog("isOpen")&&e.dialog("close")},a.event.close_dialogs=function(e){var t=B("#tribe-row-delete-dialog");t.length&&t.dialog("isOpen")&&!B(e.target).is(".ui-dialog, a")&&!B(e.target).closest(".ui-dialog").length&&(e.preventDefault(),e.stopPropagation(),a.event.close_delete_confirmation_dialog(t))},B(function(){a.init()})}(jQuery,tribe_events_pro_admin.recurrence);