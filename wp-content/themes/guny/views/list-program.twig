{% extends "list.twig" %}

{% block head_extras %}
<style>
  .c-hero { background-color: #2793E0; background-image: url(/wp-content/themes/guny/assets/img/hero-program-landing.svg); }
  .facetwp-seo { display: none; }
</style>
{% endblock %}

{% block hero %}
<div class="js-parallax">
  <header class="c-hero js-parallax-content">
    <div class="o-container js-parallax-text">
      <h1 class="c-hero__title">{{options.program_landing_title}}</h1>
      <p class="c-hero__tagline">{{options.program_landing_tagline}}</p>
    </div>
  </header>
</div>
{% endblock %}

{% block list_sidebar %}
  <div class="c-list-box c-list-box--quaternary js-accordion" data-multiselectable="false">

    {# categories #}
    <div class="c-list-box__item">
      <h3 class="js-accordion__header c-list-box__heading" id="type-filter-heading">{{ __('All Program Types', 'guny') }}</h3>
      <ul class="js-accordion__content c-list-box__content" id="type-filter-panel">
        <li class="c-list-box__subitem" v-for="category in programTypes">
          <label class="checkbox" :for="category.slug">
            <input type="checkbox"  :id="category.slug" :value="category.slug" v-model="checkedProgramType" class="checkbox__field">
            {# <input type="checkbox"  :id="category.slug" :value="{term_id: category.term_id, slug: category.slug}" v-model="checkedProgramType" class="checkbox__field" @click="loading = !loading"> #}
            <svg class="checkbox__indicator"><use xlink:href="#icon-check"></use></svg>
            v{ category.name }
          </label>
        </li>
      </ul>
    </div>

    {# age groups #}
    <div class="c-list-box__item">
      <h3 class="js-accordion__header c-list-box__heading" id="age-filter-heading">{{ __('All Ages', 'guny') }}</h3>
      <ul class="js-accordion__content c-list-box__content" id="age-filter-panel">
        <li class="c-list-box__subitem" v-for="age in ageGroups">
          <label class="checkbox" :for="age.name">
            <input type="checkbox"  :id="age.name" :value="{id: age.id, slug: age.slug}" v-model="checkedAgeGroup" class="checkbox__field">
            <svg class="checkbox__indicator"><use xlink:href="#icon-check"></use></svg>
            v{ age.name }
          </label>
        </li>
      </ul>
    </div>

  </div>
{% endblock %}

{% block post_list %}

<section class="c-block-list c-block-list--blue o-content-container u-sm-gutter animated infinite pulse slow" v-show="isLoading">
</section>

<section class="c-block-list c-block-list--shade o-content-container u-sm-gutter animate programs-content" v-if="!isLoading">
{# <section class="c-block-list c-block-list--blue o-content-container u-sm-gutter"> #}
  <div class="c-block-list__item u-sm-gutter" v-for="post in programs">
    <div class="c-card {{is_first ? "c-card--hero #{age_group.slug|sanitize|replace({'-es':''})}-gradient"}}">
      <a :href="post.link">
        <div class="c-card__sticker sticker" aria-hidden="true">
          <svg class="icon--large"><title>v{ post.programs_cat[0].slug }</title><use :href="'#icon-' + post.programs_cat[0].slug.replace('-es','')" ></use></svg>
        </div>
      </a>
      <h3 class="c-card__title">
        <a :href="post.link" :title="post.title" rel="bookmark">
          v{ post.title }
        </a>
      </h3>
      <div class="c-card__subtitle">
        <p><strong>v{post.acf.program_name}</strong></p>
        <p>v{post.acf.government_agency}</p>
      </div>
      <div class="c-card__tags" v-if="post.programs_cat">
        <span v-for="term in post.programs_cat"> 
          <router-link :to="{ query: { programs_cat: term.term_id }}" class="button--pill" @click.native="parseQuery">v{ term.name }</router-link>
        </span>
        <span v-for="term in post.age_group"> 
          <router-link :to="{ query: { age_group: term.term_id }}" class="button--pill button--pill--alt" @click.native="parseQuery">v{ term.name }</router-link>
        </span>
      </div>
      <div class="c-card__body">
        v{ post.excerpt }
      </div>
    </div>
  </div>

  {# no results #}
  <p class="type--no-results" v-if="errorMsg == true">
    {{ __('Sorry. There are no programs found for those filter options.', 'guny') }}</p>
</section>

{# pagination #}
<div class="o-content-container--compact programs-content" v-if="!isLoading">
  <button v-if="programPage > 1" >
    <router-link class="button--outline button--outline--gray alignleft" v-if="programPage > 1" :to="{ query: { page: programPage-1 }}" @click.native="parseQuery">{{ __('Previous', 'guny') }}</router-link>    
  </button>


  <button v-if="errorMsg == false">
    <router-link class="button--outline button--outline--gray alignright" :to="{ query: { page: programPage+1 }}" @click.native="parseQuery">{{ __('Next', 'guny') }}</router-link>
  </button>
</div>
{% endblock %}

