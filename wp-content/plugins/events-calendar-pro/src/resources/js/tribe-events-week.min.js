!function(y,w,k,x,j,D,S,T,O,C){k(w).ready(function(){var a=k("body"),e=k("#tribe-bar-date"),t=k("#tribe-events"),r=k("#tribe-events-bar"),i=k("#tribe-events-header"),n=0,s=!1,_=k(".column.tribe-week-grid-hours div:first-child"),o="/";void 0!==O.events_base&&(o=k("#tribe-events-header").data("baseurl")),x.default_permalinks&&(o=o.split("?")[0]),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,r=Number(arguments[1])||0;for((r=r<0?Math.ceil(r):Math.floor(r))<0&&(r+=t);r<t;r++)if(r in this&&this[r]===e)return r;return-1}),i.length&&(n=i.data("startofweek")),r.addClass("tribe-has-datepicker");var l=i.data("date");"0"!==S.datepicker_format&&(l=tribeDateFormat(l,"tribeQuery")),S.date=l;var d=[0,1,2,3,4,5,6],p=d.indexOf(n);-1<p&&d.splice(p,1);var b="yyyy-mm-dd";if("0"!==S.datepicker_format){b=x.datepicker_formats.main[S.datepicker_format];var u=D.get_url_param("tribe-bar-date");u&&e.val(tribeDateFormat(u,S.datepicker_format))}function c(){var e,t,r=k(".tribe-grid-body .tribe-grid-content-wrap .column > div[id*='tribe-events-event-']"),u=k(".tribe-week-grid-inner-wrap").height(),c=5e3;r.each(function(){var e=k(this),t=e.find("a"),r=e.attr("data-hour"),a=e.attr("data-duration"),i=e.attr("data-min"),n=k('.tribe-week-grid-block[data-hour="'+r+'"]'),s=0;n.get(0)&&(s=n.offset().top-n.parent().offset().top-n.parent().scrollTop()),s=parseInt(Math.round(s))+parseInt(i);var o=parseInt(u)-parseInt(a)-parseInt(s);o<0&&(a=a+o-14);var l,d=t.css("height","auto").height()+5,p=(l=a<d?d:a-16)+16,b={height:l+"px"};s<c&&(c=s,_=e),e.css({height:p+"px",top:s+"px"}),t.css(b).parent().css(b)}),r.length||(_=k(".column.tribe-week-grid-hours div:first-child")),k(".tribe-week-grid-wrapper.tribe-scroller").nanoScroller({paneClass:"scroller-pane",sliderClass:"scroller-slider",contentClass:"scroller-content",iOSNativeScrolling:!0,alwaysVisible:!1,scrollTo:_}),e=k(".tribe-grid-body .tribe-events-mobile-day.column"),t=100/e.length,e.css("width",t+"%"),k(".tribe-grid-header .tribe-grid-content-wrap .column").css("width",t+"%"),k(".tribe-grid-allday .tribe-grid-content-wrap .column").css("width",t+"%"),k("div[id^='tribe-events-event-']").css({visibility:"visible",opacity:"0"}).delay(500).animate({opacity:"1"},{duration:250}),r.each(function(){var e=k(this),t=e.next(),r={left:"0",width:"65%"},a={right:"0",width:"65%"};if(t.length){var i=t.offset(),n=[i.left,i.left+t.outerWidth()],s=[i.top,i.top+t.outerHeight()],o=e.offset(),l=[o.left,o.left+e.outerWidth()],d=[o.top,o.top+e.outerHeight()];n[0]<l[1]&&l[0]<n[1]&&s[0]<d[1]&&d[0]<s[1]&&(e.is(".overlap-right")?t.css(r).addClass("overlap-left"):(e.is(".overlap-left")||e.css(r),t.css(a).addClass("overlap-right")))}}),tribe_ev.fn.equal_height(k(".tribe-grid-header .tribe-grid-content-wrap .column")),tribe_ev.fn.equal_height(k(".tribe-grid-allday .column")),setTimeout(function(){var e=k(".tribe-grid-body").height();k(".tribe-grid-body .tribe-grid-content-wrap .column").height(e)},250)}function v(e,t){var r,a,i,n=k("#tribe-mobile-container"),s=k('.tribe-mobile-day[data-day="'+e+'"]');s.length?s.show():(n.append('<div class="tribe-mobile-day" data-day="'+e+'"></div>'),a=k('.tribe-mobile-day[data-day="'+(r=e)+'"]'),(i=k('.column[title="'+r+'"] .tribe-week-event')).length&&i.each(function(){var e=k(this);if(e.tribe_has_attr("data-tribejson")){var t=e.data("tribejson");a.append(tribe_tmpl("tribe_tmpl_week_mobile",t))}})),s.length||(s=k('.tribe-mobile-day[data-day="'+e+'"]')),!s.find("h5").length&&s.find(".tribe-events-mobile").length&&s.prepend('<h5 class="tribe-mobile-day-date">'+t+"</h5>")}function g(){var e,t,r=k("#tribe-events-content > .tribe-events-grid");a.is(".tribe-mobile")?(e=r,t=k(".tribe-events-mobile-day"),k("#tribe-mobile-container").length||k('<div id="tribe-mobile-container" />').insertAfter(e),e.hide(),t.each(function(){var e=k(this).attr("title");v(e,k('.tribe-grid-content-wrap .column[title="'+e+'"]').find("span").attr("data-full-date"))})):(r.show(),k(".tribe-event-placeholder").each(function(){var e=k(this).attr("data-event-id"),t=parseInt(k("#tribe-events-event-"+e).outerHeight());k(this).height(t)}),function(){for(var e=k(".tribe-grid-allday"),t=e.find(".vevent"),r=parseInt(k(".tribe-grid-content-wrap .column").width())-8,a=1;a<8;a++)t.hasClass("tribe-dayspan"+a)&&e.find(".tribe-dayspan"+a).children("div").css("width",r*a+(4*(2*a-2)+(a-1))+"px")}(),(6<k(".tribe-week-grid-wrapper .tribe-grid-body .column").length?k(".tribe-grid-body .column:eq(5), .tribe-grid-body .column:eq(6), .tribe-grid-body .column:eq(7)"):k(".tribe-grid-body .column:eq(4), .tribe-grid-body .column:eq(5)")).addClass("tribe-events-right"),c())}if(x.datepicker_opts={format:b,weekStart:n,daysOfWeekDisabled:d,autoclose:!0},tribe_ev.fn.ensure_datepicker_i18n(),e.bootstrapDatepicker(x.datepicker_opts).on("changeDate",function(e){if(!S.updating_picker){var t=tribeDateFormat(e.date,"tribeQuery");S.date=t,s=!0,(T.no_bar()||T.live_ajax()&&T.pushstate)&&(T.reset_on()||m(e,t))}}),g(),k(j).on("resize-complete.tribe",function(){g()}),T.pushstate&&!T.map_view()){var h="action=tribe_week&eventDate="+S.date;x.params.length&&(h=h+"&"+x.params),S.category&&(h=h+"&tribe_event_category="+S.category),D.is_featured()&&(h+="&featured=1"),history.replaceState({tribe_params:h,tribe_url_params:x.params},"",location.href),k(y).on("popstate",function(e){var t=e.originalEvent.state;t&&(S.do_string=!1,S.pushstate=!1,S.popping=!0,S.params=t.tribe_params,S.url_params=t.tribe_url_params,D.pre_ajax(function(){f()}),D.set_form(S.params))})}function m(e,t){if("change_view"!=tribe_events_bar_action){if(e.preventDefault(),S.ajax_running)return;var r=k("#tribe-bar-date");S.popping=!1,t?(S.date=t,x.cur_url=o+S.date+"/"):r.length&&""!==r.val()?("0"!==S.datepicker_format?S.date=tribeDateFormat(r.bootstrapDatepicker("getDate"),"tribeQuery"):S.date=r.val(),x.cur_url=o+S.date+"/"):x.cur_url=s?o+S.date+"/":(S.date=x.cur_date,o+x.cur_date+"/"),D.pre_ajax(function(){f()})}}function f(){if(!D.invalid_date(S.date)){k("#tribe-events-header");k(".tribe-events-grid").tribe_spin(),S.pushcount=0,S.ajax_running=!0,S.popping||(S.filter_cats&&(x.cur_url=o),S.params={action:"tribe_week",eventDate:S.date,tribe_event_display:S.view,featured:D.is_featured()},S.url_params={},x.default_permalinks&&(S.url_params.hasOwnProperty("eventDate")||(S.url_params.eventDate=S.date),S.url_params.hasOwnProperty("post_type")||(S.url_params.post_type=O.events_post_type),S.url_params.hasOwnProperty("eventDisplay")||(S.url_params.eventDisplay=S.view)),S.url_params.hasOwnProperty("tribe_event_display")||(S.url_params.tribe_event_display=S.view),S.category&&(S.params.tribe_event_category=S.category),k(j).trigger("tribe_ev_serializeBar"),k(j).trigger("serialize-bar.tribe"),S.params=k.param(S.params),S.url_params=k.param(S.url_params),k(j).trigger("tribe_ev_collectParams"),k(j).trigger("collect-params.tribe"),S.pushstate=!0,S.do_string=!1,(0<S.pushcount||S.filters||x.default_permalinks)&&(S.pushstate=!1,S.do_string=!0));var r=!1;T.pushstate?(C&&tec_debug.time("Week View Ajax Timer"),k(j).trigger("tribe_ev_ajaxStart").trigger("tribe_ev_weekView_AjaxStart"),k(j).trigger("ajax-start.tribe").trigger("week-view-ajax-start.tribe"),k.post(TribeWeek.ajaxurl,S.params,function(e){if(S.initial_load=!1,D.enable_inputs("#tribe_events_filters_form","input, select"),e.success){S.ajax_running=!1,x.ajax_response={total_count:"",view:e.view,max_pages:"",tribe_paged:"",timestamp:(new Date).getTime()},x.cur_url=D.get_base_url();var t=k.parseHTML(e.html);k("#tribe-events-content.tribe-events-week-grid").replaceWith(t),g(),k("div[id*='tribe-events-event-']").hide().fadeIn("fast"),S.page_title=k("#tribe-events-header").data("title"),S.view_title=k("#tribe-events-header").data("viewtitle"),w.title=S.page_title,k(".tribe-events-page-title").html(S.view_title),(k("#tribe-events.tribe-events-shortcode").length||S.do_string)&&(-1!==x.cur_url.indexOf("?")&&(x.cur_url=x.cur_url.split("?")[0]),x.cur_url=x.cur_url+"?"+S.url_params,r=!0),S.do_string&&history.pushState({tribe_url_params:S.url_params,tribe_params:S.params},S.page_title,r?x.cur_url:x.cur_url+"?"+S.url_params),S.pushstate&&history.pushState({tribe_url_params:S.url_params,tribe_params:S.params},S.page_title,r?x.cur_url:x.cur_url+"?"+S.url_params),k(j).trigger("tribe_ev_ajaxSuccess").trigger("tribe_ev_weekView_AjaxSuccess"),k(j).trigger("ajax-success.tribe").trigger("week-view-ajax-success.tribe"),C&&tec_debug.timeEnd("Week View Ajax Timer")}})):S.url_params.length?y.location=r?x.cur_url:x.cur_url+"?"+S.url_params:y.location=x.cur_url}}t.on("click",".tribe-events-nav-previous, .tribe-events-nav-next",function(e){if(e.preventDefault(),!S.ajax_running){var t=k(this).find("a");S.popping=!1,S.date=t.attr("data-week"),D.update_base_url(t.attr("href")),"0"!==S.datepicker_format?D.update_picker(tribeDateFormat(S.date,x.datepicker_formats.main[S.datepicker_format])):D.update_picker(S.date),D.pre_ajax(function(){f()})}}),k("form#tribe-bar-form").on("submit",function(e){m(e,null)}),D.snap("#tribe-events-content","body","#tribe-events-footer .tribe-events-nav-previous, #tribe-events-footer .tribe-events-nav-next"),k(j).on("run-ajax.tribe",function(){f()}),k(".tribe-week-event a.url").on("click touchend",function(e){var t=k(this).attr("href");y.location=t}),C&&tec_debug.info("TEC Debug: tribe-events-week.js successfully loaded"),S.view&&C&&tec_debug.timeEnd("Tribe JS Init Timer")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_js_config,tribe_debug);