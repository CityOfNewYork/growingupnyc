Object.prototype.hasOwnProperty.call(window,"tribe_ev")&&(tribe_ev.geoloc={map:[],geocoder:[],geocodes:[],bounds:[],markers:[],refine:!1}),function(a,n,y,s,l,c,g,d,b){y.extend(tribe_ev.fn,{has_address:function(e,t){for(var r=0;r<t.length;r++)if(t[r].formatted_address==e)return!0;return!1},pre_ajax:function(i){if(y("#tribe-bar-geoloc").length){var o=y("#tribe-bar-geoloc").val();o.length?l.process_geocoding(o,function(e){if(c.geocodes=e,1<c.geocodes.length&&!l.has_address(o,c.geocodes))l.print_geo_options();else{var t=e[0].geometry.location.lat(),r=e[0].geometry.location.lng();t&&y("#tribe-bar-geoloc-lat").val(t),r&&y("#tribe-bar-geoloc-lng").val(r),i&&"function"==typeof i&&(y("#tribe_events_filter_item_geofence").length&&y("#tribe_events_filter_item_geofence").show(),i())}}):(y("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""),i&&"function"==typeof i&&(y("#tribe_events_filter_item_geofence").length&&(y("#tribe_events_filter_item_geofence input").prop("checked",!1),y("#tribe_events_filter_item_geofence").hide().find("select").prop("selectedIndex",0)),i()))}else i&&"function"==typeof i&&i()},print_geo_options:function(){y("#tribe-geo-links").empty(),y("#tribe-geo-options").show();var e=[];c.refine=!0;for(var t=0;t<c.geocodes.length;t++){var r=c.geocodes[t].formatted_address;e[r]||(e[r]=!0,y("<a/>").text(r).attr("href","#").addClass("tribe-geo-option-link").data("index",t).appendTo("#tribe-geo-links"),d.map_view()&&l.map_add_marker(c.geocodes[t].geometry.location.lat(),c.geocodes[t].geometry.location.lng(),r))}c.refine=!1},pro_tooltips:function(){var e=y("#tribe-events"),t=y("body"),C=(e.hasClass("tribe-events-shortcode"),e.hasClass("view-month")||t.hasClass("events-gridview"),e.hasClass("view-week")||t.hasClass("tribe-events-week"));e.hasClass("view-photo")||t.hasClass("tribe-events-photo"),e.hasClass("view-day")||t.hasClass("tribe-events-day"),e.hasClass("view-list")||t.hasClass("events-list"),e.hasClass("view-map")||t.hasClass("tribe-events-map"),t.hasClass("single-tribe_events");e.on("mouseenter",'div[id*="tribe-events-event-"], div[id*="tribe-events-daynum-"]:has(a), div.event-is-recurring',function(){var e=0,t=y(this);if(C&&t.tribe_has_attr("data-tribejson"))if(t.parents(".tribe-grid-allday").length){if(!(r=t.find(".tribe-events-tooltip")).length){i=t.data("tribejson"),o=t.hasClass("tribe-event-featured")?"tribe_tmpl_tooltip_featured":"tribe_tmpl_tooltip";t.append(tribe_tmpl(o,i)),r=t.find(".tribe-events-tooltip")}e=t.outerHeight()+6,r.css("bottom",e).show()}else{var r;if(!(r=t.find(".tribe-events-tooltip")).length){var i=t.data("tribejson"),o=t.hasClass("tribe-event-featured")?"tribe_tmpl_tooltip_featured":"tribe_tmpl_tooltip";t.append(tribe_tmpl(o,i)),r=t.find(".tribe-events-tooltip")}var a,n,s,l=y(".tribe-week-grid-wrapper .scroller-content"),c=t.parent(),g=c.parent(),d=Math.ceil(g.width()),b=Math.ceil(t.width()),p=Math.ceil(r.outerWidth()),v=l.height(),_=l.scrollTop(),u=c.position(),h=t.position(),f=_-Math.ceil(h.top),m=c.hasClass("tribe-events-right"),w={};r.hasClass("hovered")||r.data("ow",p).addClass("hovered"),p=(a=m?Math.ceil(u.left)-20:d-b-Math.ceil(u.left))<=p?a:r.data("ow")>a?a:r.data("ow"),w=m?{right:b+20,bottom:"auto",width:p+"px"}:{left:b+20,bottom:"auto",width:p+"px"},r.css(w),n=r.height(),0<=f?f+=5:f=(s=f+v)<n?s-n-8:5,r.css("top",f).show()}})},process_geocoding:function(e,r){var t={address:e,bounds:new google.maps.LatLngBounds(new google.maps.LatLng(TribeEventsPro.geocenter.min_lat,TribeEventsPro.geocenter.min_lng),new google.maps.LatLng(TribeEventsPro.geocenter.max_lat,TribeEventsPro.geocenter.max_lng))};c.geocoder.geocode(t,function(e,t){return t==google.maps.GeocoderStatus.OK?(r(e),e):(t==google.maps.GeocoderStatus.ZERO_RESULTS&&GeoLoc.map_view&&spin_end(),t)})},set_recurrence:function(e){e?(g.recurrence=!0,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","1")):(g.recurrence=!1,tribe_storage&&tribe_storage.setItem("tribeHideRecurrence","0"))}}),y.extend(tribe_ev.tests,{hide_recurrence:function(){return!!y("#tribeHideRecurrence:checked").length}}),y(n).ready(function(){y(".tribe-bar-geoloc-filter").length&&y(".tribe-bar-geoloc-filter").append('<div id="tribe-geo-options"><div id="tribe-geo-links"></div></div>');var t=y("#tribe-events"),r=y("#tribe-bar-geoloc"),i=y("#tribe-geo-options"),e=!1;l.pro_tooltips(),d.hide_recurrence()&&l.set_recurrence(!0),g.recurrence=d.hide_recurrence(),t.on("click","#tribeHideRecurrence",function(){g.popping=!1,g.do_string=!0,g.paged=1,e=!!y(this).is(":checked"),l.set_recurrence(e),y(s).trigger("tribe_ev_updatingRecurrence").trigger("tribe_ev_runAjax"),y(s).trigger("updating-recurrence.tribe").trigger("run-ajax.tribe")}),y(s).on("pre-collect-bar-params.tribe",function(){r.length&&(r.val().length?"map"===g.view_target&&(g.url_params.action="tribe_geosearch"):y("#tribe-bar-geoloc-lat, #tribe-bar-geoloc-lng").val(""));tribe_storage&&"1"===tribe_storage.getItem("tribeHideRecurrence")&&"month"!==g.view_target&&"week"!==g.view_target&&(g.url_params.tribeHideRecurrence="1")}),d.map_view()||(i.length&&(t.on("click",".tribe-geo-option-link",function(e){e.preventDefault(),e.stopPropagation();var t=y(this);y(".tribe-geo-option-link").removeClass("tribe-option-loaded"),t.addClass("tribe-option-loaded"),r.val(t.text()),y("#tribe-bar-geoloc-lat").val(c.geocodes[t.data("index")].geometry.location.lat()),y("#tribe-bar-geoloc-lng").val(c.geocodes[t.data("index")].geometry.location.lng()),l.pre_ajax(function(){y(s).trigger("tribe_ev_runAjax"),y(s).trigger("run-ajax.tribe"),i.hide()})}),y(n).on("click",function(e){i.hide()})),l.snap("#tribe-geo-wrapper","#tribe-geo-wrapper","#tribe-events-footer .tribe-events-nav-previous a, #tribe-events-footer .tribe-events-nav-next a")),y("#wp-toolbar").on("click",".tribe-split-single a, .tribe-split-all a",function(){var e="";if(e=y(this).parent().hasClass("tribe-split-all")?TribeEventsPro.recurrence.splitAllMessage:TribeEventsPro.recurrence.splitSingleMessage,!a.confirm(e))return!1});var o=1===t.data("recurrence-list");o&&y(s).on("tribe_ev_ajaxStart",function(){"string"==typeof g.params&&(g.params=decodeURIComponent(g.params.replace(/\+/g,"%20")).split("&").map(function(e){return e.split("=")}).filter(function(e){return 2===e.length}).reduce(function(e,t){return e[t[0]]?(e[t[0]].push||(e[t[0]]=[e[t[0]]]),e[t[0]].push(t[1])):e[t[0]]=t[1],e},{})),g.params.is_recurrence_list=o;var e=t.data("tribe_post_parent");e&&(g.params.tribe_post_parent=e),g.params=y.param(g.params)}),b&&tec_debug.info("TEC Debug: tribe-events-pro.js successfully loaded")})}(window,document,jQuery,tribe_ev.events,tribe_ev.fn,tribe_ev.geoloc,tribe_ev.state,tribe_ev.tests,tribe_debug);